[TOC]

# è®¾è®¡åŸåˆ™ä¹‹ä¸€ï¼šä¸é˜»æ–­æ•°æ®æµ
ç¼–å†™ç»„ä»¶æ—¶ï¼Œä¸€ä¸ªåŸºæœ¬è®¾è®¡å‡†åˆ™æ˜¯ï¼šä½¿ç”¨è€…å¸Œæœ›ç»„ä»¶å¯ä»¥åæ˜ å‡ºä¼ é€’å±æ€§çš„å˜åŒ–ã€‚

## 1. åå®è·µï¼š`props`èµ‹å€¼`state`
æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š
```
//ä¸Šå±‚ç»„ä»¶
function Principle1d1(props) {
    const [isOk,setIsOk] = useState(false);// isOk åœ¨ state é‡Œï¼Œéšæ—¶ä¼šå˜åŒ–
    return <Button color={isOk ? 'red' : 'green'} onClick={()=>setIsOk(s=>!s)}>
        æŒ‰é’®
    </Button>
}

//Buttonç»„ä»¶
function Button({children,onClick,color}) {
    // âœ… `color` æ°¸è¿œæ˜¯æ–°çš„
    return <button style={{color}} onClick={onClick}>
        {children}
    </button>
}
```
æ¯æ¬¡ç‚¹å‡»æŒ‰é’®ï¼ŒæŒ‰é’®çš„æ–‡å­—é¢œè‰²ä¼šè¢«æ”¹å˜ï¼Œè¿™ç§è¡Œä¸ºæ˜¯Reactæ¨èå†™æ³•ï¼Œå±æ€§çš„å˜åŒ–å¯ä»¥è¢«ç»„ä»¶åæ˜ å‡ºæ¥ã€‚

åœ¨å®è·µä¸­æœ‰ä¸€ç§å¸¸è§é”™è¯¯ï¼šå°†`props`å±æ€§èµ‹å€¼ç»™`state`ï¼Œè¿™ä¼šå¯¼è‡´æ•°æ®æµè¢«é˜»æ–­ï¼Œè§ä¸‹é¢ä»£ç ï¼š
```
class Button extends Component{
    state = {
        color:this.props.color
    };

    render() {
        const {children,onClick} = this.props;
        const {color} = this.state;// ğŸ”´ `color` ä¸æ›´æ–°äº†ï¼
        return <button style={{color}} onClick={onClick}>
            {children}
        </button>
    }
}
```
åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæ•°æ®è¢«é˜»æ–­äº†ï¼Œç‚¹å‡»æŒ‰é’®ï¼ŒæŒ‰é’®æ–‡å­—é¢œè‰²ä¿æŒä¸å˜ã€‚

è¿™é‡Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿâ€”â€”**å°†`props`çš„å±æ€§ä¼ é€’ç»™`state`ä¼šå¯¼è‡´åç»­å¯¹æ­¤å±æ€§çš„å…¨éƒ¨æ›´æ–°**

å¾ˆå¤šæ—¶å€™è¿™ç§å†™æ³•ä¼šå¯¼è‡´ç»„ä»¶çš„å·¥ä½œå¼‚å¸¸â€”â€”é€šå¸¸ï¼Œæˆ‘ä»¬å¸Œæœ›ç»„ä»¶æ˜¯åæ˜ æ•°æ®å˜åŒ–çš„ï¼Œè¿™é‡Œè¿åäº†è¿™ä¸€åŸåˆ™ã€‚

å¦‚æœçš„ç¡®æœ‰è¿™ç§åˆå§‹åŒ–éœ€æ±‚çš„è¯ï¼Œæ¨èåšæ³•æ˜¯å°†æ­¤å±æ€§å‘½åä¸º`initValue`æˆ–`defaultValue`ä»¥åŒºåˆ†å…¶ç‰¹å¾ã€‚

## 2. åº”å¯¹å¤æ‚è®¡ç®—
ä¸ä¸Šä¾‹ç±»ä¼¼çš„æ˜¯ï¼Œæˆ‘ä»¬ä¹Ÿåº”å½“é¿å…å°†é€šè¿‡`props`è®¡ç®—å¾—åˆ°çš„å€¼èµ‹ç»™`state`ï¼Œç†ç”±åŒä¸Šï¼Œä¼šå¿½ç•¥åç»­æ›´æ–°ã€‚è§ï¼š
```
state = {
    color:slowlyCalculate(this.props.color)//è¿™ä¸ªå‡½æ•°ä¼šè¿›è¡Œå¤æ‚è¿ç®—
};
```
ä¸€æ ·çš„é—®é¢˜ï¼Œ`props`æ›´æ–°ï¼Œcolorå±æ€§ä¸ä¼šé‡æ–°è®¡ç®—å¾—åˆ°ã€‚

è¿™é‡Œæ¯”åˆšåˆšå¤æ‚ä¸€äº›ï¼Œåœ¨åˆšæ‰æˆ‘ä»¬æ¨èç›´æ¥è¯»å–`props`ï¼Œå¦‚æœè¿™é‡Œæˆ‘ä»¬åœ¨`render`é‡Œè¿›è¡Œ`const color = slowlyCalculate(this.props.color);`ï¼Œä»£ä»·ä¼šæ›´å¤§ä¸€äº›ï¼Œå› ä¸ºåˆšåˆšæåˆ°äº†`slowlyCalculate`æ˜¯ä¸€ä¸ªå¤æ‚è¿ç®—ï¼Œæ‰€ä»¥ä¸è¦è¿›è¡Œæ— æ„ä¹‰è°ƒç”¨æ›´å¥½ã€‚

æ ¹æ®ä¸åŒçš„æƒ…å†µï¼Œå¯ä»¥é‡‡å–é€‚å½“çš„ä¼˜åŒ–æ‰‹æ®µï¼Œè¿™é‡Œç”±ç®€å•åˆ°å¤æ‚æ¨èå‡ ç§æ‰‹æ³•ã€‚

### 2.1 `PureComponent`
`PureComponent`ä¸`component`æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ

å¯ä»¥è®¤ä¸º`PureComponent`å®ç°äº†ä¸€ä¸ªå†…ç½®çš„æ¯”è¾ƒå‡½æ•°ï¼Œæ­¤æ¯”è¾ƒä½¿ç”¨äº†`Object.is`ç®—æ³•ï¼Œå¯¹`state`å’Œ`props`è¿›è¡Œäº†æµ…æ¯”è¾ƒï¼Œå¦‚æœä¸ä¸Šä¸€æ¬¡å®Œå…¨ç›¸åŒï¼Œåˆ™è·³è¿‡æ­¤æ¬¡`render`

å…³äº`PureComponent`æœ‰å‡ ä¸ªå‡†åˆ™éœ€è¦æ³¨æ„:
1. å¦‚éå¿…è¦ï¼Œè¯·ä½¿ç”¨`Component`ï¼Œå› ä¸ºæ¯”è¾ƒæœ¬èº«ä¹Ÿæ˜¯æœ‰æŸè€—çš„
2. `PureComponent`åªèƒ½è¿›è¡Œæµ…æ¯”è¾ƒï¼Œå¯¹äºä¸€äº›å¤æ‚æ•°æ®å¯èƒ½æ— èƒ½ä¸ºæ­¤æˆ–å‡ºç°é”™è¯¯åˆ¤æ–­ï¼Œæ­¤æ—¶å¯å€ŸåŠ©`shouldComponentUpdate`æˆ–`forceUpdate`æ¥ç¡®ä¿ç»„ä»¶çš„æ­£ç¡®æ›´æ–°
3. `PureComponent`ä¸`shouldComponentUpdate`ä¼šè·³è¿‡æ‰€æœ‰å­ç»„ä»¶æ ‘çš„`props`æ›´æ–°ï¼Œå› æ­¤è¯·ç¡®ä¿æ‰€æœ‰å­ç»„ä»¶éƒ½æ˜¯çº¯ç»„ä»¶ã€çº¯ç»„ä»¶ï¼šç›¸åŒçš„`props`å¾—åˆ°ç›¸åŒçš„æ¸²æŸ“ï¼Œæ— å‰¯ä½œç”¨çš„ç»„ä»¶ã€‘

ä¸è¿‡æŸäº›æƒ…å†µä¸‹è¿˜æ˜¯ä¼šæœ‰é—®é¢˜ï¼Œ`children`ä¸€æ—¦æ”¹å˜ï¼Œå­ç»„ä»¶å°±ä¼šè§¦å‘é‡æ¸²æŸ“ï¼Œ`PureComponent`ä¸èƒ½åº”å¯¹è¿™ä¸ªé—®é¢˜

### 2.2 `ComponentDidUpdate`
åˆ©ç”¨`ComponentDidUpdate`æ‰‹åŠ¨æ§åˆ¶ç»ç”±å¤æ‚è®¡ç®—å¾—åˆ°çš„å±æ€§ä¹Ÿæ˜¯ä¸€ç§é€‰æ‹©ï¼š
```
componentDidUpdate(prevProps) {
    if(prevProps.color !== this.props.state){
        //é¿å…é¢å¤–é‡å¤æ¸²æŸ“
        this.setState({color:slowlyCalculate(this.props.color)})
    }
}
```
è¿™æ ·å¯ä»¥é¿å…é¢å¤–çš„è®¡ç®—ï¼Œä¸è¿‡éšä¹‹è€Œæ¥çš„æ˜¯å¦ä¸€ä¸ªé—®é¢˜ï¼šç»„ä»¶åœ¨æ¯æ¬¡æ›´æ–°åä¼šæœ‰ä¸¤æ¬¡æ¸²æŸ“ã€‚æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥åº”å¯¹è¿™ä¸ªé—®é¢˜ï¼Ÿ

### 2.3 `componenetWillReceiveProps`
16.3ç‰ˆæœ¬åæ­¤æ–¹æ³•å·²ä¸æ¨èä½¿ç”¨ï¼Œé€šå¸¸æˆ‘ä»¬åœ¨è¿™ä¸ªç”Ÿå‘½å‘¨æœŸé‡Œå¤„ç†`side effect`ã€‚

å› ä¸ºå®ƒæ˜¯åœ¨`render`é˜¶æ®µä¹‹å‰æ‰§è¡Œçš„ï¼Œæ‰€ä»¥ä¸ä¼šé€ æˆä¸¤æ¬¡æ¸²æŸ“ã€‚ä¸è¿‡ä¼šå¸¦æ¥ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼šä¸å®‰å…¨ï¼Œä¸ºreactçš„æ–°ç‰¹æ€§å¹¶å‘æ¸²æŸ“å¸¦æ¥é—®é¢˜ã€ï¼Ÿã€‘

### 2.4 `getDerivedStateFromProps`
å®‰å…¨ï¼Œä½†æ˜¯éš¾ç”¨ã€‚

### 2.5 `memoization`
æ¨èæ–¹æ¡ˆï¼Œåˆ©ç”¨çº¯å‡½æ•°çš„ç‰¹æ€§è¿›è¡Œè®°å¿†ï¼Œå‡å°‘æ˜‚è´µè®¡ç®—çš„è¿è¡Œæ¬¡æ•°ã€‚

å¦‚æœæ˜¯ç±»ç»„ä»¶ï¼Œéœ€è¦å€ŸåŠ©ä¸€äº›è¾…åŠ©ç¨‹åºï¼Œä¾‹å¦‚[memoize-one](https://github.com/alexreardon/memoize-one)ã€reactå®˜æ–¹æ¨èã€‘

å¦‚æœä½¿ç”¨hookï¼Œä¼šæ›´ç®€å•ï¼Œ`useMemo`æä¾›äº†ç±»ä¼¼çš„èƒ½åŠ›ã€‚

okï¼Œåˆ°è¿™é‡Œè¿›è¡Œä¸€ä¸ªæ€»ç»“ï¼š**æ˜‚è´µè®¡ç®—ä¹Ÿä¸æ˜¯å°†propsèµ‹å€¼ç»™stateçš„ç†ç”±ï¼Œæ¸²æŸ“ç»“æœåº”è¯¥å“åº”æ•°æ®å˜åŒ–**

## 3. ä¸è¦åœ¨`side effect`é‡Œé˜»æ–­æ•°æ®æµ
åˆšåˆšæˆ‘ä»¬ä»‹ç»äº†é˜»æ–­æ•°æ®æµçš„å¯èƒ½æƒ…å†µä¹‹ä¸€ã€propsèµ‹å€¼åˆ°stateã€‘ã€‚

å¦ä¸€ç§æƒ…å†µæ˜¯å‰¯ä½œç”¨ï¼Œå‰¯ä½œç”¨ã€å¦‚è·å–æ•°æ®ã€‘åŒæ ·æ˜¯æ•°æ®æµé‡è¦çš„ä¸€éƒ¨åˆ†ã€‚

```
class SearchResults extends React.Component {
  state = {
    data: null
  };
  componentDidMount() {
    this.fetchResults();
  }
  fetchResults() {
    const url = this.getFetchUrl();
    // è·å–æ•°æ®...
  }
  getFetchUrl() {
    return 'http://myapi/results?query' + this.props.query;
  }
  render() {
    // ...
  }
}
```
è¿™ç§ç»„ä»¶å†™æ³•å¾ˆå¸¸è§ï¼Œä¸è¿‡æœ‰äº›é—®é¢˜ï¼Œè¿™ä¸ªç»„ä»¶çš„æ•°æ®è·å–ä¾èµ–`this.props.query`ï¼Œåœ¨è¿™ä¸ªç»„ä»¶ä¸­ï¼Œ`this.props.query`å˜åŒ–ï¼Œæ•°æ®ä¸ä¼šå˜åŒ–ã€‚

è¿™é‡Œå‰¯ä½œç”¨æ²¡æœ‰å“åº”`props`çš„å˜åŒ–ï¼Œåœ¨Reactä¸­å¾ˆå¤šæ—¶å€™ä¼šé€ æˆbugã€‚

æ€ä¹ˆä¿®å¤è¿™é‡Œï¼š
1. æ£€æŸ¥`componenDidMount`é‡Œè°ƒç”¨åˆ°çš„æ‰€æœ‰æ–¹æ³•
2. è®°ä¸‹æ–¹æ³•é‡Œæ‰€ä½¿ç”¨åˆ°çš„æ‰€æœ‰`props`å’Œ`state`
3. ç¡®ä¿ä¸è®º`props`å’Œ`state`å¦‚ä½•å˜åŒ–ï¼Œéƒ½é‡æ–°æ‰§è¡Œå‰¯ä½œç”¨ã€é€šå¸¸ä¼šå€ŸåŠ©`componendDidUpdate`ã€‘

okï¼Œå‡è®¾æˆ‘ä»¬ä¿®å¤äº†åˆšåˆšç»„ä»¶çš„bugï¼Œç»„ä»¶å¯ä»¥æ­£å¸¸è¿è¡Œäº†ã€‚ä¸è¿‡ï¼Œç»„ä»¶æœ‰äº†æ–°çš„å˜åŒ–ï¼Œ`getFetchUrl`ä¾èµ–äº†ä¸€ä¸ªæ–°çš„å±æ€§`this.state.currentPage`

å¦‚æœæˆ‘ä»¬åªæ”¹åŠ¨`getFetchUrl`å°±ä¼šå¯¼è‡´åˆšåˆšbugå‡ºç°ï¼Œæ­£ç¡®çš„åšæ³•æ˜¯æ”¹å®Œä¹‹åç»§ç»­åˆšåˆšçš„ä¸‰æ­¥åšæ³•ï¼Œç¡®ä¿æ¯æ¬¡å‰¯ä½œç”¨ä¾èµ–çš„`props`é¡¹å˜åŒ–æ—¶å‰¯ä½œç”¨éƒ½å¯ä»¥å“åº”æ‰§è¡Œã€‚

åŸåˆ™ï¼š**props å’Œ state æ˜¯ React æ•°æ®æµçš„ä¸€éƒ¨åˆ†ã€‚åœ¨è¿™ä¸ªæ•°æ®æµä¸­ï¼Œrendering å’Œ side effects éƒ½åº”å“åº”å®ƒä»¬çš„å˜åŒ–ï¼Œè€Œä¸æ˜¯å¿½ç•¥å®ƒä»¬ï¼**

æ¯æ¬¡ä¾èµ–é¡¹å˜åŒ–ï¼Œæˆ‘ä»¬ä¸å¾—æ‰‹åŠ¨æŸ¥æ‰¾ä¾èµ–å¹¶ä¿®æ”¹åˆ¤æ–­é€»è¾‘ä»¥å“åº”æ›´æ–°ï¼Œè¿™éå¸¸éº»çƒ¦ï¼Œè€Œä¸”å®¹æ˜“å‡ºé”™ã€‚

å¦‚æœå¯ä»¥è‡ªåŠ¨æ•è·è¿™äº›é”™è¯¯ï¼Œå°†ä¼šä¸ºæˆ‘ä»¬å¸¦æ¥æå¤§ä¾¿åˆ©ï¼Œå¯ä»¥åšåˆ°è¿™ä¸€ç‚¹å—ï¼Ÿ

å¯æƒœçš„æ˜¯ï¼Œæ£€æŸ¥ç±»ç»„ä»¶çš„ä¸€è‡´æ€§æä¸ºå›°éš¾ï¼Œä»»ä½•æ–¹æ³•éƒ½å¯ä»¥è°ƒç”¨ä»»ä½•å…¶ä»–æ–¹æ³•ï¼Œå¯¹`componendDidMount`å’Œ`componentDidUpdate`è¿›è¡Œé™æ€åˆ†æä¼šå‡ºç°å¤§é‡è¯¯æŠ¥ã€‚

Reactå®˜æ–¹çš„æ–¹æ¡ˆæ˜¯ç»™å‡ºä¸€ä¸ªå¯ä»¥è¢«é™æ€åˆ†æçš„ä¸€è‡´æ€§APIï¼ŒReact Hookæœ‰å¾ˆå¤šè¿™æ ·çš„ä¾‹å­ï¼Œå…¸å‹çš„`useEffect`

è¯·çœ‹å‡½æ•°ç»„ä»¶åˆšåˆšä¾‹å­çš„å†™æ³•:
```
function SearchResults({ query }) {
  const [data, setData] = useState(null);
  const [currentPage, setCurrentPage] = useState(0);

  useEffect(() => {
    function fetchResults() {
      const url = getFetchUrl();
      // æ•°æ®è·å–...
    }

    function getFetchUrl() {
      return (
        'http://myapi/results?query' + query +
        '&page=' + currentPage
      );
    }

    fetchResults();
  }, [currentPage, query]); // âœ… æ›´æ–°åé‡æ–°è·å–

  // ...
}
```

å°†é€»è¾‘æ”¾åœ¨`useEffect`ä¸­ï¼Œæˆ‘ä»¬æ›´å®¹æ˜“çœ‹å‡ºè¿™é‡Œä¾èµ–äº†Reactæ•°æ®æµä¸­çš„å“ªäº›å€¼ï¼Œè¿™äº›å€¼è¢«ç§°ä½œ**ä¾èµ–**

æ³¨æ„ï¼Œ**ä¾èµ–**è¿™ä¸ªæ¦‚å¿µåœ¨ç±»ç»„ä»¶æ—¶å°±å­˜åœ¨ï¼Œç±»ç»„ä»¶ä¼šéå†å¯¹åº”ç”Ÿå‘½å‘¨æœŸå†…æ‰€æœ‰è°ƒç”¨çš„æ–¹æ³•ï¼Œæ¥æœç´¢å¾—åˆ°è¿™äº›ä¾èµ–é¡¹ï¼Œ`useEffect`è¿™ä¸ªAPIåªæ˜¯æ˜¾å¼çš„ä½¿ç”¨äº†ç›¸åŒçš„æ¦‚å¿µã€‚

è¿™ç§æ˜¾å¼çš„å†™æ³•æ–¹ä¾¿é™æ€æ£€æŸ¥ï¼Œå¯ä»¥é€šè¿‡ç¨‹åºè‡ªåŠ¨è¿›è¡ŒéªŒè¯ã€‚

è¿™æ˜¯ä¸€æ¡é€šç”¨è§„åˆ™ï¼š**æ— è®ºæ˜¯å°†ç»„ä»¶ç¼–å†™ä¸ºç±»è¿˜æ˜¯å‡½æ•°ï¼Œéƒ½å¿…é¡»ä¸º effect å“åº”æ‰€æœ‰ props å’Œ state çš„æ›´æ–°**

ä½¿ç”¨Class APIï¼Œå¼€å‘è€…å¿…é¡»è‡ªå·±è€ƒè™‘æ›´æ–°çš„ä¸€è‡´æ€§ï¼Œæ‰‹åŠ¨å†³å®šæ˜¯å¦éªŒè¯`props`æˆ–`state`çš„æŸä¸€é¡¹ï¼Œå¦åˆ™ï¼Œå°†ä¼šå¯¼è‡´ç»„ä»¶ä¸å…·æœ‰å¼¹æ€§ã€‚è¿™ä¸åªæ˜¯Reactä¼šæœ‰é—®é¢˜ï¼Œæ‰€æœ‰å…è®¸å¼€å‘è€…è‡ªå·±**åˆ›å»º**å’Œ**æ›´æ–°**äº‹ä»¶çš„UIåº“éƒ½å­˜åœ¨è¿™ä¸ªé—®é¢˜ã€‚

`useEffect`é¼“åŠ±é€šè¿‡ä¸€è‡´æ€§æ¥ç¡®ä¿ç»„ä»¶å¼¹æ€§ï¼Œä¸€å¼€å§‹çš„æ—¶å€™å¯èƒ½ä¼šæœ‰äº›ä¸é€‚åº”ï¼Œä½†è¿™ä¹ˆåšçš„ç»“æœæ˜¯ç»„ä»¶å¯¹é€»è¾‘æ›´æ”¹æ›´å…·æœ‰å¼¹æ€§ã€‚

è€Œä¸”è¿˜æœ‰ä¸€ç‚¹å¥½å¤„æ˜¯`useEffect`å¯ä»¥é€šè¿‡linteræ¥æ£€æŸ¥ä¸€è‡´æ€§ï¼Œæˆ‘ä»¬å°†åˆ©ç”¨linteræ¥æ•è·bugâ€”â€”è¿™æ­£æ˜¯linteræœ€å¤§çš„æ„ä¹‰ã€‚

# 4. ä¸è¦åœ¨ä¼˜åŒ–ä¸­é˜»æ–­æ•°æ®æµ
æˆ‘ä»¬åœ¨åšæ‰‹åŠ¨ä¼˜åŒ–æ—¶ï¼Œå¯èƒ½ä¼šé€ æˆæ•°æ®æµé˜»æ–­çš„é—®é¢˜ã€‚

æˆ‘ä»¬æœ‰å“ªäº›æ‰‹åŠ¨ä¼˜åŒ–çš„ç‚¹ï¼Ÿ
1. `PureComponent`-å®‰å…¨
2. `React.memo`-é»˜è®¤å®‰å…¨ï¼Œä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°æ‰‹åŠ¨æ¯”è¾ƒæ—¶å­˜åœ¨é£é™©
3. `ShouldComponentUpdate`-å­˜åœ¨é£é™©
4. `ComponentDidUpdate`-å­˜åœ¨é£é™©
5. ...

å…¶å®æ‰‹åŠ¨ä¼˜åŒ–æœ€å¤§çš„é£é™©æ¥è‡ªäºå‡½æ•°ï¼šå› ä¸ºå‡½æ•°é€šå¸¸æ˜¯ç¨³å®šçš„ï¼Œä½†æ˜¯æŸäº›æ—¶å€™æ¥è‡ªäºpropsçš„å‡½æ•°ä¾æ—§æœ‰å˜åŒ–çš„å¯èƒ½ï¼Œå¦‚æœä¸å“åº”propsçš„æ›´æ–°å¯èƒ½ä¼šå› æ­¤å¯¼è‡´bugã€‚

å¦‚æœåšæŒè‡ªå®šä¹‰æ¯”è¾ƒï¼Œå¿…é¡»éµå®ˆçš„ä¸€æ¡åŸåˆ™ï¼š**è¯·åŠ¡å¿…ç¡®ä¿æ›´æ–°ä¸è¦è·³è¿‡å‡½æ•°**

åœ¨hookå†™æ³•ä¸­å¯ä»¥å¾ˆå¥½çš„åº”å¯¹è¿™ä¸ªé—®é¢˜ï¼Œlinterè§„åˆ™ä¼šè¾…åŠ©è¿›è¡Œæç¤ºï¼Œè€Œä¸”æˆ‘ä»¬å¯ä»¥åˆ©ç”¨`useCallback`ã€`useContent`è¿›è¡Œä¼˜åŒ–ï¼Œä»¥é¿å…å‡½æ•°ä¼ é€’é€ æˆçš„bug

Reactå®˜æ–¹æ¨èä¸é˜»æ–­æ•°æ®æµï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç»„ä»¶ä¸åº”è¯¥ä»¥ä¸åŒçš„é€»è¾‘åº”å¯¹åˆå§‹åŒ–å’Œæ›´æ–°ï¼Œå§‹ç»ˆå¦‚ä¸€çš„å˜åŒ–ä½¿å¾—ç»„ä»¶å¯ä»¥æ›´å¥½çš„åº”å¯¹å˜åŒ–ï¼Œè¿™ä¹Ÿæ˜¯æ¨å‡ºhookçš„é‡è¦ç†ç”±ã€‚

å¯¹äºç±»ç»„ä»¶ï¼Œåœ¨ç”Ÿå‘½å‘¨æœŸä¸­ä½¿ç”¨propså’Œstateå¾ˆå®¹æ˜“å¿˜è®°æ›´æ–°ï¼Œè€Œhookä¸­linterå°†åœ¨é™æ€æ£€æŸ¥ä¸­æé†’è¿™ä¸ªé—®é¢˜ï¼Œhookæ¨åŠ¨å¼€å‘è€…å†™å‡ºæ›´å¥½æ›´å®‰å…¨çš„ä»£ç ã€‚

# è®¾è®¡åŸåˆ™ä¹‹äºŒï¼šæ—¶åˆ»å‡†å¤‡æ¸²æŸ“
å»ºè®®é˜…è¯»æ­¤éƒ¨åˆ†å‰å…ˆé˜…è¯»[You Probably Don't Need Derived State](https://react.docschina.org/blog/2018/06/07/you-probably-dont-need-derived-state.html)

è¯¦ç»†å†…å®¹è§â€œä½ å¯èƒ½ä¸éœ€è¦æ´¾ç”Ÿstate.mdâ€

# è®¾è®¡åŸåˆ™ä¹‹ä¸‰ï¼šæ²¡æœ‰å•ä¾‹ç»„ä»¶
æ°¸è¿œä¸è¦è®¾è®¡ä¸€ä¸ªå•ä¾‹ç»„ä»¶ï¼Œä»€ä¹ˆæ˜¯å•ä¾‹ç»„ä»¶ï¼Ÿå•ä¾‹ç»„ä»¶å‡å®šå®ƒåœ¨é¡µé¢ä¸­æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªã€‚

ä¸€ä¸ªåˆ¤æ–­ç»„ä»¶æ˜¯å¦è„†å¼±çš„æŒ‡æ ‡ï¼šéšè—å’Œæ˜¾ç¤ºä¸€é¢—ç»„ä»¶æ ‘ï¼Œæ˜¯å¦ä¼šç ´åè¿™é¢—æ ‘ä¹‹å¤–çš„ç»„ä»¶ï¼Ÿ

# è®¾è®¡åŸåˆ™ä¹‹å››ï¼šéš”ç¦»æœ¬åœ°çŠ¶æ€
å…³é”®åœ¨äºå“ªäº›æ•°æ®æ˜¯å…¨å±€çš„ï¼Œå“ªäº›æ•°æ®æ˜¯ç»„ä»¶è‡ªå·±çš„ï¼Ÿ
> è¿™é‡Œçš„å…¨å±€ä¸æ˜¯ç›´æ¥çš„å…¨å±€å˜é‡ï¼Œå¯èƒ½ä¸reduxã€mobxçŠ¶æ€ç®¡ç†åº“ç›¸å…³ï¼Œéœ€è¦äº†è§£ç›¸å…³çŸ¥è¯†

# èµ„æ–™
- [Writing Resilient Components](https://overreacted.io/zh-hans/writing-resilient-components/)
- [You Probably Don't Need Derived State](https://react.docschina.org/blog/2018/06/07/you-probably-dont-need-derived-state.html)