[TOC]

# 线程的作用
Java中的代码，都是以线程为单位执行的，线程的作用就是执行代码

Java的编译过程类似下面这段伪代码：
```js
const 源文件 = 编写源文件();
编译(源文件);

function 编译(源文件){
    if(存在语法错误(源文件)) return 源文件;
    return 'xxx.class'; 
}

function 编写源文件(){
    return 'xxx.java';
}
```

Java的执行过程类似下面这段伪代码：
```js
启动java平台();
执行java程序(Main);
退出java平台();

function 执行java程序(Main){
    读取并加载class文件(Main);
    创建线程();
    线程执行();//从main方法开始
    线程关闭();//以main方法结束
}
```

# 启动线程
我们通过`Thread`类操作线程。

## 第一种方式：`Thread`
- `Thread()` 构造方法，暂时可以认为没有参数
- `start()` 启动线程，并执行`run()`方法
- `run()` 此方法会被`start()`作为程序执行的起点

### 创建线程
```java
public class MyThread extends Thread{
    public void run(){
        System.out.println("这是在MyThread进程中执行的代码！");
    }
}
```

### 使用线程
```java
public class Main {
    public static void main(String[] args) {
        MyThread myThread = new MyThread();
        myThread.start();
    }
}
```

## 第二种方式：`Runnable`
`java`是单继承体系，如果继承了`Thread`类就不能继承其他类了，有时候这会是个麻烦。

这里提供一种摆脱`Thread`继承的方法，核心就是使用`Runnable`接口。

### `MyRunnable`
```java
public class MyRunnable implements Runnable{
    public void run(){
        System.out.println("这是在MyThread进程中执行的代码！");
    }
}
```

### `Main`
```java
public class Main {
    public static void main(String[] args) {
        MyRunnable myRunnable = new MyRunnable();
        Thread myThread = new Thread(myRunnable);
        myThread.start();
    }
}
```

### 原理解释
在`run`方法的代码是这样的：
```java
public void run(){
    if(target !== null){
        target.run();
    }
}
```
只要设置`target`就可以执行了，在`Thread`及其继承类中，会将其`this`设置为`target`，所以可以正常执行。而使用`Runnable`接口实现符合一个`run`方法需要的类，再将其实例通过`Thread`构造函数设置为`target`，就可以正常执行`run`了。

# 进一步使用线程
## 设置线程名称
### 通过构造函数设置
1. `Thread(String name)`
2. `Thread(Runnable target, String name)`

### 通过方法设置
`void setName(String name)`

## 获取线程名称
`String getName()`

## 获取当前运行线程名称
```java
public class PrintCurrentThread {
    public void PrintCurrentThreadName(){
        Thread currentThread = Thread.currentThread();
        String threadName = currentThread.getName();
        System.out.println("执行当前代码的线程名是：" + threadName);
    }
}
```

```java
public class Main {
    public static void main(String[] args) {
        PrintCurrentThread printer = new PrintCurrentThread();
        printer.PrintCurrentThreadName();
    }
}
```

# 专题
## 单线程和多线程有什么区别？
单线程执行是按顺序执行的，一行代码执行完成后才会执行下一行。

而多线程，执行到启动线程的时候，等于告诉java平台启动一个线程，用这个线程执行代码，然后就继续执行下一行的代码了。主线程中它不会等待其他线程的启动和执行，多线程的执行可以认为是并行关系。