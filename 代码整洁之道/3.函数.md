[TOC]

# 1. 短小
编程的第一原则是短小，第二原则是更短小。

20世纪80年代，Bob大叔他们的原则是函数不该长于一屏，那个时候VT100屏幕有24行、80列，编辑器占用4行放菜单。

到了现在，我们使用小字体和大屏幕，100行、150列不是问题，但即使如此一行也不要有150字符，函数也不该有100行那么长，20行封顶最佳。

1991，bob大叔去找kent beck，发现他写的小程序里函数只有两三行、三四行。每个函数一目了然，每个函数只说一件事，每个函数都依序将读者带到下一个函数，这就是函数应该达到的短小程度。

## 代码块与缩进
`if/else`、`while`语句的代码应该只占一行，这一行应该是一个函数调用语句，这样不仅能保持函数的短小，而且，因为块内调用的函数拥有较具说明性名称，所以也增加了文档上的价值。

函数不应该大到足以容纳嵌套结构，函数的缩进层级不应该多于一层或两层，这样的函数易于阅读和理解。

# 2. 只做一件事
判断一个函数是否不止做了一件事，就是看它能否再拆出一个函数，如果拆除的函数只是单纯的重新诠释其实现，没有改变其抽象层级，则还是在做相同的事情。

# 3. 每个函数一个抽象层级
要确保函数只做一件事，函数的语句就要放到同一抽象层级上。

函数中混杂不同抽象层级，往往会让人迷惑，读者可能无法判断某个表达式是基础概念还是细节。

## 自顶向下读代码：向下规则
我们想要让每个函数后面都跟着位于下一抽象层级的函数，这样在查看函数列表时，就能循抽象层级向下阅读了。

# 4. switch
> 注：if/else也有一样的问题
switch很难写的简短，除非它只做一件事，然而switch天生需要做很多事情。

switch存在的问题：
1. 代码太长
2. 做了不止一件事
3. 违反单一权责原则，有好几个修改它的理由
4. 违反开放闭合原则，每当添加新类型时，就必须修改switch

# 5. 使用具有描述性的名称

# 6. 函数参数
最理想的参数数量是0，其次是1，再次是2，应尽量避免3，有足够特殊的理由才能用三个以上的参数——所以无论如何也不要这么做！

参数会带来哪些麻烦：
1. 带有太多概念性，参数和函数名处于不同抽象层级，它要求我们了解目前并不特别重要的细节
2. 从测试角度来说，参数越多越麻烦，因为多参数的组合是非常多种的，需要足够多的案例进行覆盖 
3. 输出参数比输入参数更让人难以理解。一般来说，我们习惯会认为信息通过参数输入函数，通过返回值从函数中输出，我们不会期望信息通过参数输出，输出参数往往让人迷惑

## 单参数

## 标识参数
标识参数丑陋不堪，向函数传入布尔值（或者了类型标识）简直是骇人听闻的做法，这么做，方法签名会立刻变得复杂起来，相当于大声宣布这个函数不只做一件事，即如果标识为true这么做，标识为false那样做。

比如：
```js
render(true);//render(isSuite);
//重构后
renderForSuite();
renderForStringTest();
```